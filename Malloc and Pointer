#include <stdio.h>
#include <stdlib.h>

char* my_strdup(char *src) {
    char *dup, *p, *q;
    int len = 0;
    for (p = src; *p != '\0'; p++)
        len++;

    
    dup = (char *)malloc((len + 1) * sizeof(char));
    if (dup == NULL)
        return NULL;
    q = dup;
    for (p = src; *p != '\0'; p++, q++)
        *q = *p;

    *q = '\0'; 

    return dup;
}

int main() {
    char str[] = "Hello, world!";
    char *copy = my_strdup(str);

    if (copy == NULL) {
        printf("Memory allocation failed!\n");
        return 1;
    }

    printf("Original: %s\n", str);
    printf("Copy: %s\n", copy);

    free(copy); 
    return 0;
}
